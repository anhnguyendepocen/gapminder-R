<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: R for reproducible scientific analysis</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">R for reproducible scientific analysis</h1></a>
          <h2 class="subtitle">Introduction to R and RStudio</h2>
          <section class="objectives panel panel-warning">
<div class="panel-heading">
<h2 id="learning-objectives"><span class="glyphicon glyphicon-certificate"></span>Learning objectives</h2>
</div>
<div class="panel-body">
<ul>
<li>Appreciate why write code and why R specifically</li>
<li>Gain familiarity with the various panes in the RStudio IDE</li>
<li>Use basic math functions in R, with calculator and fun() notation</li>
<li>Understand variables and how to assign to them</li>
<li>Use comparison operations</li>
<li>Manage your workspace in an interactive R session</li>
<li>Understand errors and warnings</li>
<li>To be able to seek help via <code>?</code> and Google</li>
</ul>
</div>
</section>
<p>Welcome to the R portion of the workshop.</p>
<p>In this lesson, you’ll become familiar with the R language, the RStudio environment, and some best practices that will make your life easier and your science more reliable.</p>
<h4 id="why-r">Why R?</h4>
<p>R is a free, open-source programming language. It can do most things that any programming language can do, but it was designed for data analysis and statistics, which is why we teach it. It has a huge user-community and is highly extensible, with over 7,000 packages that build extra functionality at the official Comprehensive R Archive Network. For almost anything you want to do, there is an R package to help.</p>
<h4 id="why-rstudio">Why RStudio?</h4>
<p>RStudio is an IDE (integrated development environment) which we use to manage and execute R code. It is also free and open-source, it works on all platforms (e.g. you can interface to Amazon Web Services using RStudio), and it integrates version control and project management.</p>
<h4 id="why-script">Why script?</h4>
<ul>
<li>Power</li>
<li>Flexibility</li>
<li>Editability: Error fixing, tweaks</li>
<li>Traceability: Return and know what was done</li>
<li>Reproducability: Cornerstone of science</li>
<li>Communication: No ambiguity
<ul>
<li>Literate programming, <code>knitr</code></li>
</ul></li>
</ul>
<h3 id="introduction-to-rstudio">Introduction to RStudio</h3>
<p>Open RStudio: 3 panels:</p>
<ul>
<li>The interactive R console (entire left)</li>
<li>Workspace/History (tabbed in upper right)</li>
<li>Files/Plots/Packages/Help (tabbed in lower right)</li>
</ul>
<h4 id="workflow-within-rstudio">Workflow within Rstudio</h4>
<p>Console vs. script</p>
<ol style="list-style-type: decimal">
<li>Console
<ul>
<li>The R console is where all of your code gets run. This console in RStudio is the same as the one you would get if you just typed in <code>R</code> in your command line.</li>
<li>When you start RStudio, you’ll see a bunch of information, followed by a “&gt;” and a blinking cursor. This is a “Read, evaluate, print loop”: you type in commands, R executes them and returns a result.</li>
<li><em>Demo R-as-calculator in console</em></li>
<li>History is saved, but this is laborsome</li>
</ul></li>
<li>Script
<ul>
<li>Preserve work in a plain-text file (with .R extension)</li>
<li><em>Create new R script</em></li>
<li>Fourth RStudio panel.</li>
<li>Command/ctrl-enter to push current line</li>
<li>Mixes interactivity and preservation</li>
<li>Save just text and get same results</li>
<li>Building preservable flow of operations</li>
</ul></li>
</ol>
<aside class="callout panel panel-info">
<div class="panel-heading">
<h4 id="tip-pushing-to-the-interactive-r-console"><span class="glyphicon glyphicon-pushpin"></span>Tip: Pushing to the interactive R console</h4>
</div>
<div class="panel-body">
<p>To run the current line click on the <code>Run</code> button just above the file pane. Or use the short cut which can be seen by hovering the mouse over the button.</p>
<p>To run a block of code, select it and then <code>Run</code>.</p>
<p>Select-all and <code>Run</code> – moving toward a model where we run whole script.</p>
</div>
</aside>
<h3 id="introduction-to-r">Introduction to R</h3>
<p>The simplest thing you could do with R is do arithmetic:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span> +<span class="st"> </span><span class="dv">100</span></code></pre></div>
<pre class="output"><code>[1] 101
</code></pre>
<p>And R will print out the answer, with a preceding “[1]”. Don’t worry about this for now, we’ll explain that later. For now think of it as indicating output.</p>
<p>If you type in an incomplete command, R will wait for you to complete it:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">&gt;<span class="st"> </span><span class="dv">1</span> -</code></pre></div>
<pre class="output"><code>+</code></pre>
<p>Any time you hit return and the R session shows a “+” instead of a “&gt;”, it means it’s waiting for you to complete the command. If you want to cancel a command you can simply hit “Esc” and RStudio will give you back the “&gt;” prompt.</p>
<aside class="callout panel panel-info">
<div class="panel-heading">
<h4 id="tip-cancelling-commands"><span class="glyphicon glyphicon-pushpin"></span>Tip: Cancelling commands</h4>
</div>
<div class="panel-body">
<p>If you’re using R from the commandline instead of from within RStudio, you need to use <code>Ctrl+C</code> instead of <code>Esc</code> to cancel the command. This applies to Mac users as well!</p>
<p>Cancelling a command isn’t just useful for killing incomplete commands: you can also use it to tell R to stop running code (for example if its taking much longer than you expect), or to get rid of the code you’re currently writing.</p>
</div>
</aside>
<p>Order of operations, same as in algebra class. From highest to lowest precedence:</p>
<ul>
<li>Parentheses: <code>(</code>, <code>)</code></li>
<li>Exponents: <code>^</code></li>
<li>Divide: <code>/</code></li>
<li>Multiply: <code>*</code></li>
<li>Add: <code>+</code></li>
<li>Subtract: <code>-</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">3</span> +<span class="st"> </span><span class="dv">5</span> *<span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre class="output"><code>[1] 13
</code></pre>
<p>Use parentheses to group to force the order of evaluation, and/or to make code easier to read.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(<span class="dv">3</span> +<span class="st"> </span><span class="dv">5</span>) *<span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre class="output"><code>[1] 16
</code></pre>
<p>Speaking of being easy to read: - Whitespace is ignored by R. Use it consistently to make code readable. - Spaces around operators - Comment liberally</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(<span class="dv">3</span> +<span class="st"> </span>(<span class="dv">5</span> *<span class="st"> </span>(<span class="dv">2</span> ^<span class="st"> </span><span class="dv">2</span>))) <span class="co"># hard to read</span>
<span class="dv">3</span> +<span class="st"> </span><span class="dv">5</span> *<span class="st"> </span><span class="dv">2</span> ^<span class="st"> </span><span class="dv">2</span>       <span class="co"># easier to read, once you know rules</span>
<span class="dv">3+5</span>*<span class="dv">2</span>^<span class="dv">2</span>             <span class="co"># very hard to read</span>
<span class="dv">3</span> +<span class="st"> </span><span class="dv">5</span> *<span class="st"> </span>(<span class="dv">2</span> ^<span class="st"> </span><span class="dv">2</span>)     <span class="co"># if you forget some rules, this might help</span></code></pre></div>
<p>The text I’ve typed after each line of code is called a comment. Anything that follows the hash symbol <code>#</code> is ignored by R.</p>
<p>Really small or large numbers get a scientific notation:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span>/<span class="dv">10000</span></code></pre></div>
<pre class="output"><code>[1] 2e-04
</code></pre>
<p>Which is shorthand for “multiplied by <code>10^XX</code>”. So <code>2e-4</code> is shorthand for <code>2 * 10^(-4)</code>.</p>
<p>You can write numbers in scientific notation too:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="fl">5e3</span>  <span class="co"># Note the lack of minus here</span></code></pre></div>
<pre class="output"><code>[1] 5000
</code></pre>
<h4 id="mathematical-functions">Mathematical functions</h4>
<p>R has many built in mathematical functions. To call a function, we simply type its name, follow by and open and closing parentheses. Anything we type inside those parentheses is called the function’s arguments:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sin</span>(<span class="fl">3.14159</span>)  <span class="co"># trigonometry functions</span></code></pre></div>
<pre class="output"><code>[1] 2.65359e-06
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">3</span>)  <span class="co"># natural logarithm</span></code></pre></div>
<pre class="output"><code>[1] 1.098612
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log10</span>(<span class="dv">100</span>)  <span class="co"># base-10 logarithm</span></code></pre></div>
<pre class="output"><code>[1] 2
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">exp</span>(<span class="fl">0.5</span>) <span class="co"># e^(1/2)</span></code></pre></div>
<pre class="output"><code>[1] 1.648721
</code></pre>
<p>Don’t need to remember function names. There are many ways to discover or rediscover them when you need them. We will discuss soon.</p>
<h4 id="comparing-things">Comparing things</h4>
<p>We can also do comparison in R:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span> ==<span class="st"> </span><span class="dv">1</span>  <span class="co"># equality (note two equals signs, read as &quot;is equal to&quot;)</span></code></pre></div>
<pre class="output"><code>[1] TRUE
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span> !=<span class="st"> </span><span class="dv">2</span>  <span class="co"># inequality (read as &quot;is not equal to&quot;)</span></code></pre></div>
<pre class="output"><code>[1] TRUE
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span> &lt;<span class="st">  </span><span class="dv">2</span>  <span class="co"># less than</span></code></pre></div>
<pre class="output"><code>[1] TRUE
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span> &gt;=<span class="st"> </span>-<span class="dv">9</span> <span class="co"># greater than or equal to</span></code></pre></div>
<pre class="output"><code>[1] TRUE
</code></pre>
<h4 id="variables-and-assignment">Variables and assignment</h4>
<p>We can store values in variables using the assignment operator <code>&lt;-</code> or equals sign <code>=</code>, like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">1</span>/<span class="dv">4</span></code></pre></div>
<p>Notice that nothing was printed. Instead, we stored it for later in a <strong>variable</strong>, <code>x</code>. <code>x</code> now contains the <strong>value</strong> <code>0.25</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x</code></pre></div>
<pre class="output"><code>[1] 0.25
</code></pre>
<p>Look for the <code>Environment</code> tab in one of the panes of RStudio, and you will see that <code>x</code> and its value have appeared. Our variable <code>x</code> can be used in place of a number in any calculation that expects a number:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x +<span class="st"> </span><span class="dv">1</span></code></pre></div>
<pre class="output"><code>[1] 1.25
</code></pre>
<p>This doesn’t change the value of <code>x</code> or store the result anywhere, it simply prints the answer to the console.</p>
<p>Variables can be reassigned:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">99</span></code></pre></div>
<p><code>x</code> used to contain the value 0.25 and and now it has the value 99.</p>
<p>Assignment values can contain the variable being assigned to:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span>x +<span class="st"> </span><span class="dv">1</span> </code></pre></div>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h4 id="mcq-variable-assignment"><span class="glyphicon glyphicon-pencil"></span>MCQ – Variable Assignment</h4>
</div>
<div class="panel-body">
<p>What does the following code print?</p>
<pre><code>a &lt;- 1
b &lt;- 2
c &lt;- a + b
b &lt;- 4
a &lt;- b
c &lt;- a
c </code></pre>
<ol style="list-style-type: lower-alpha">
<li>a</li>
<li>3</li>
<li>4</li>
<li>::nothing::</li>
</ol>
</div>
</section>
<h4 id="variable-name-conventions">Variable name conventions</h4>
<p>Variable names can contain letters, numbers, underscores and periods. They cannot start with a number nor contain spaces at all. Different people use different conventions for long variable names, these include</p>
<ul>
<li>periods.between.words</li>
<li>underscores_between_words</li>
<li>camelCaseToSeparateWords</li>
</ul>
<p>What you use is up to you, but <strong>be consistent</strong>.</p>
<h5 id="tab-completion">Tab completion</h5>
<p>Use descriptive variable names, as they make your code easier to understand. It doesn’t take any extra time because you can use tab-completion to avoid typing long names.</p>
<p><em>Demo tab completion for variable names, function names, and arguments.</em></p>
<h3 id="understanding-functions-getting-help">Understanding functions &amp; getting help</h3>
<h4 id="r-help-files">R help files</h4>
<p>Once you figure out what function you want, you need to figure out how to use it. Every function has an associated help-file. They can be hard to read, especially at first, but it is important to learn how to make sense of them.</p>
<p><code>?function</code> brings up help-file. E.g.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?log</code></pre></div>
<p>Each help-file contains the following components.</p>
<ul>
<li>Description: An extended description of what the function does.</li>
<li>Usage: The arguments of the function and their default values.</li>
<li>Arguments: An explanation of the data each argument is expecting.</li>
<li>Details: Any important details to be aware of.</li>
<li>Value: The data the function returns.</li>
<li>See Also: Any related functions you might find useful.</li>
<li>Examples: Some examples for how to use the function.</li>
</ul>
<h4 id="other-ways-to-get-help">Other ways to get help</h4>
<ul>
<li><code>??</code> searches the text of all R help files, e.g. <code>??base</code> will find <code>log</code>.</li>
<li>Google</li>
<li>Stack Overflow</li>
<li><a href="http://www.cookbook-r.com/">Cookbook for R</a></li>
<li><a href="http://www.rstudio.com/resources/cheatsheets/">RStudio cheat sheets</a></li>
</ul>
<h4 id="arguments-to-functions">Arguments to functions</h4>
<ul>
<li>Can be specified by order or by name</li>
<li>Before, when we entered <code>log(3)</code>, <code>log</code> knew <code>3</code> was <code>x</code> because it was in the first position, but we could have also told <code>log</code> explicitly that <code>3</code> is the value <code>x</code> should take. These are the same:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">3</span>)  </code></pre></div>
<pre class="output"><code>[1] 1.098612
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dt">x =</span> <span class="dv">3</span>)</code></pre></div>
<pre class="output"><code>[1] 1.098612
</code></pre>
<ul>
<li>Some arguments have default values, e.g. <code>log</code>’s <code>base</code> defaults to <code>exp(1)</code>, <em>e</em>, unless you tell it otherwise. So these are identical:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dt">x =</span> <span class="dv">3</span>)</code></pre></div>
<pre class="output"><code>[1] 1.098612
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dt">x =</span> <span class="dv">3</span>, <span class="dt">base =</span> <span class="kw">exp</span>(<span class="dv">1</span>))</code></pre></div>
<pre class="output"><code>[1] 1.098612
</code></pre>
<p>To get the base 10 logarithm of 3, you could do</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dt">x =</span> <span class="dv">3</span>, <span class="dt">base =</span> <span class="dv">10</span>)</code></pre></div>
<pre class="output"><code>[1] 0.4771213
</code></pre>
<p>If you provide a function with arguments by name, they can go in any order. Otherwise, they have to appear in the order specified by the function. These are all the same:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">3</span>, <span class="dv">10</span>)</code></pre></div>
<pre class="output"><code>[1] 0.4771213
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dt">x =</span> <span class="dv">3</span>, <span class="dt">base =</span> <span class="dv">10</span>)</code></pre></div>
<pre class="output"><code>[1] 0.4771213
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dt">base =</span> <span class="dv">10</span>, <span class="dt">x =</span> <span class="dv">3</span>)</code></pre></div>
<pre class="output"><code>[1] 0.4771213
</code></pre>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h4 id="mcq-which-of-these-things-is-not-like-the-other-ones"><span class="glyphicon glyphicon-pencil"></span>MCQ – Which of these things is not like the other ones?</h4>
</div>
<div class="panel-body">
<p>Three of the following lines produce the same result. Without running the code, which one will produce a different result than the others? The helpfile for <code>log</code> (<code>?log</code>) may be helpful.</p>
<pre><code>a. log(x = 1000, base = 10)
b. log10(1000)
c. log(base = 10, x = 1000)
d. log(10, 1000)</code></pre>
</div>
</section>
<h3 id="errors-and-warnings">Errors and warnings</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aNegativeNumber &lt;-<span class="st"> </span>-<span class="dv">1</span>
<span class="kw">log</span>(aNegativeNumber)
<span class="kw">log</span>(negativeNumber)</code></pre></div>
<aside class="callout panel panel-info">
<div class="panel-heading">
<h4 id="tip-warnings-vs.errors"><span class="glyphicon glyphicon-pushpin"></span>Tip: Warnings vs. Errors</h4>
</div>
<div class="panel-body">
<p>Pay attention when R does something unexpected! Errors, like above, are thrown when R cannot proceed with a calculation. Warnings on the other hand usually mean that the function has run, but it probably hasn’t worked as expected.</p>
<p>In both cases, the message that R prints out usually give you clues how to fix a problem.</p>
</div>
</aside>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h4 id="challenge-assignment-comparison"><span class="glyphicon glyphicon-pencil"></span>Challenge – Assignment &amp; Comparison</h4>
</div>
<div class="panel-body">
<p>Which elephant weighs more? Convert one’s weight to the units of the other, and store the result in an appropriately-named new variable. Write a command to test whether elephant1 or elephant2 weights more (1 kg ≈ 2.2 lb).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">elephant1_kg =<span class="st"> </span><span class="dv">3492</span>
elephant2_lb =<span class="st"> </span><span class="dv">7757</span></code></pre></div>
</div>
</section>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/lesson-template">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
  </body>
</html>
